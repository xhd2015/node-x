!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}(globalThis,(()=>(()=>{"use strict";var e={552:function(e,n,t){var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function s(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,l)}u((o=o.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const i=t(17),r=t(900),s=t(597);(0,r.catchedRun)((function(){return o(this,void 0,void 0,(function*(){const e=yield(0,s.getNpmGlobalRoot)();yield(0,s.linkToPath)("nx",(0,i.join)(e,"node-ext/bin/nx"),{debug:!0})}))}))},900:function(e,n,t){var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function s(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,l)}u((o=o.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.runCmd=n.parseOptions=n.runOutput=n.catchedRun=n.run=void 0;const i=t(81),r=t(265);function s(e,n){return o(this,void 0,void 0,(function*(){const t=i.spawn("bash",[`-e${(null==n?void 0:n.debug)?"x":""}c`,e,"--",...(null==n?void 0:n.args)||[]],{cwd:null==n?void 0:n.cwd,env:Object.assign(Object.assign({},process.env),null==n?void 0:n.env)});t.stderr.on("data",(e=>process.stderr.write(e)));let o="";return(null==n?void 0:n.needStdout)?t.stdout.on("data",(e=>o+=e)):t.stdout.on("data",(e=>process.stdout.write(e))),new Promise(((i,r)=>{t.on("error",(function(e){r(e)})),t.on("close",(function(t){if(0!==t){let o=null==n?void 0:n.description;const i=100;if(!o)if(e.length<=i)o=e;else{const n=e.split("\n").map((e=>e.trim())).join("\n");o=n.length<=i?n:n.slice(0,i)+"..."}r(new Error(`exit code ${t}: ${o}`))}else i({exitCode:t,stdout:o})}))}))}))}Object.defineProperty(n,"parseOptions",{enumerable:!0,get:function(){return r.parse}}),n.run=s,n.runCmd=s,n.catchedRun=function(e){return o(this,void 0,void 0,(function*(){e().catch((e=>{console.error((null==e?void 0:e.message)||e),process.exit(1)}))}))},n.runOutput=function(e,n){return o(this,void 0,void 0,(function*(){return s(e,Object.assign(Object.assign({},n),{needStdout:!0})).then((e=>e.stdout.endsWith("\n")?e.stdout.slice(0,e.stdout.length-1):e.stdout))}))}},767:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.resolveShellPath=void 0;const o=t(17);n.resolveShellPath=function(e){return"~"===e?process.env.HOME:e.startsWith("~/")?(0,o.join)(process.env.HOME,e.slice("~/".length)):e}},597:function(e,n,t){var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function s(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,l)}u((o=o.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.linkToPath=n.getNpmGlobalRoot=n.addToCommonProfiles=n.commonProfiles=n.addToPath=void 0;const i=t(292),r=t(900),s=t(767),l=t(65);function u(e,n){return o(this,void 0,void 0,(function*(){const t=yield(0,i.readFile)(e,{encoding:"utf-8"}).catch((e=>{}));return!!t&&!t.includes(n)&&(yield(0,i.writeFile)(e,(0,l.addSuffix)(t,"\n")+n+"\n"),!0)}))}function c(e){return o(this,void 0,void 0,(function*(){const t=[];return yield Promise.all(n.commonProfiles.map((n=>o(this,void 0,void 0,(function*(){(yield u((0,s.resolveShellPath)(n),e))&&t.push(n)}))))),t}))}n.addToPath=u,n.commonProfiles=["~/.bashrc","~/.bash_profile","~/.zshrc","~/.profile"],n.addToCommonProfiles=c,n.getNpmGlobalRoot=function(){return o(this,void 0,void 0,(function*(){return yield(0,r.runOutput)("npm -g root || true")}))},n.linkToPath=function(e,n,t){return o(this,void 0,void 0,(function*(){if(!e)throw new Error("requires name");if(!n)throw new Error("requires file");const o=(process.env.PATH||"").split(":");if(o.includes("/usr/local/bin")){let o=!0;if(yield(0,r.runCmd)(`\n        if [[ ! -d /usr/local/bin ]];then exit 1;fi\n        \n        # nx exists, and is not a link file, then do not replace\n        if [[ -e "/usr/local/bin/${e}" && ! -L "/usr/local/bin/${e}" ]];then exit 1;fi\n\n        ln -sf "${n}" "/usr/local/bin/${e}"\n        `,t).catch((()=>o=!1)),o)return}if(yield(0,r.runCmd)(`\n    mkdir -p ~/.nx/bin\n    ln -sf "${n}" ~/.nx/bin/"${e}"\n    `,t),o.includes("~/.nx/bin")||o.includes((0,s.resolveShellPath)("~/.nx/bin")))return;const i=yield c("export PATH=~/.nx/bin:$PATH # nx");0!==i.length&&console.log(`updated profiles: ${i.join(",")}, please source profiles if needed`)}))}},265:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.parse=void 0,n.parse=function(e,n,t){null==t&&(t=process.argv.slice(2));const o=n.split(/\s+/),i={},r={},s={};for(let e of o){let n,t=e.lastIndexOf("=");-1!=t&&(n=e.slice(t+1),e=e.slice(0,t));let o="zero";e.endsWith("::")?(o="many",e=e.slice(0,e.length-2)):e.endsWith(":")&&(o="one",e=e.slice(0,e.length-1));const l=e.split(",");if(0==l.length)continue;const u=l[l.length-1];if(null!=r[u])throw new Error(`duplicate option name:${u}`);r[u]=o,n&&(s[u]=n);for(const e of l)if(0!=e.length){if(null!=i[e])throw new Error(`duplicate option name:${e}`);i[e]=u}}const l=[],u={},c={};let f=0;function d(e,n){let o=n===c;o&&(n=null);const l=i[e];if(!l)throw new Error(`no such option:${e}`);const d=s[l];if(d&&(u[d]=e),"zero"===r[l]){if(o)return void(u[l]=!0);if(null!=n)if("on"==n||"On"==n||"ON"==n||"true"==n||"True"==n||"TRUE"==n)u[l]=!0;else{if("off"!=n&&"Off"!=n&&"OFF"!=n&&"false"!=n&&"False"!=n&&"FALSE"!=n)throw new Error(`option requires no argument:${e},except on/On/ON/true/True/TRUE or off/Off/OFF/false/False/FALSE`);u[l]=!1}else u[l]=!0}else if("one"===r[l]){if(o&&(n=t[++f]),null==n)throw new Error(`option requires one argument:${e}`);u[l]=n}else{if("many"!==r[l])throw new Error(`unknown option repeat:${e} ${r[l]}`);if(o&&(n=t[++f]),null==n)throw new Error(`option requires argument:${e}`);null==u[l]?u[l]=[n]:u[l].push(n)}}for(;f<t.length;f++){const e=t[f];if("--"==e){l.push(...t.slice(f+1));break}if("-"!=e)if(e.startsWith("--")){let n=e.slice(2);const t=n.lastIndexOf("=");let o;-1!=t?(o=n.slice(t+1),n=n.slice(0,t)):o=c,d(n,o)}else if(e.startsWith("-")){const n=e.slice(1);if(1==n.length){d(n,c);continue}const t=n[0],o=i[t],s=r[o];if("one"==s||"many"==s)d(t,n.slice(1));else if("zero"==s){for(const e of n.slice(0,n.length-1))d(e,null);d(n[n.length-1],c)}}else l.push(e);else l.push(e)}function a(){let n=e;return n.startsWith("\n")&&(n=n.slice(1)),n.endsWith("\n")&&(n=n.slice(0,n.length-1)),n}return!0===u.help&&(console.log(a()),process.exit(0)),{args:l,options:u,getHelp:a}}},65:(e,n)=>{function t(e,n,t){const o=[],i=e.length;for(let r=0;r<i;){let s=n(e,r);s<0&&(s=i),o.push(t(r,s,e)),r=s+1}return o}Object.defineProperty(n,"__esModule",{value:!0}),n.addSuffix=n.trimSuffix=n.trimPrefix=n.iterMatch=n.iterLines=void 0,n.iterLines=function(e,n){return t(e,((e,n)=>e.indexOf("\n",n)),n)},n.iterMatch=t,n.trimPrefix=function(e,n){var t;return(null===(t=null==e?void 0:e.startsWith)||void 0===t?void 0:t.call(e,n))?[e.slice(n.length),!0]:[e,!1]},n.trimSuffix=function(e,n){var t;return(null===(t=null==e?void 0:e.endsWith)||void 0===t?void 0:t.call(e,n))?[e.slice(0,e.length-n.length),!0]:[e,!1]},n.addSuffix=function(e,n){return e.endsWith(n)?e:e+n}},81:e=>{e.exports=require("child_process")},292:e=>{e.exports=require("fs/promises")},17:e=>{e.exports=require("path")}},n={};return function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}(552)})()));